<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="With the launch of Kaveri, some people have been wondering if the platform is suitable for HPC applications. Floating point peak performance of the CPU and GPU on both fp32 and fp64 datatypes is one of the considerations. At launch time, we were not clear on the fp64 performance of Kaveri's GPU but now we"><meta name=author content="Larita Shotwell"><meta name=generator content="Hugo 0.98.0"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=robots content="index,follow,noarchive"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/base16/css/style.css type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type=text/css><link rel=alternate href=./index.xml type=application/rss+xml title=ByteZest><title>Floating point peak performance of Kaveri and other recent AMD and Intel chips - ByteZest</title></head><body><header><div class="container clearfix"><a class=path href=./index.html>[ByteZest]</a>
<span class=caret># _</span><div class=right></div></div></header><div class=container><main role=main class=article><article class=single itemscope itemtype=http://schema.org/BlogPosting><div class=meta><span class=key>published on</span>
<span class=val><time itemprop=datePublished datetime=2024-07-06>July 06, 2024</time></span>
<span class=key>in</span>
<span class=val><a href=./categories/blog>blog</a></span></div><h1 class=headline itemprop=headline>Floating point peak performance of Kaveri and other recent AMD and Intel chips</h1><section class=body itemprop=articleBody><img src=https://cdn.statically.io/img/images.anandtech.com/doci/7711/2014cespressconference-140104162828-phpapp02-007_678x452.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>With the launch of Kaveri, some people have been wondering if the platform is suitable for HPC applications.&nbsp; Floating point peak performance of the CPU and GPU&nbsp; on both fp32 and fp64 datatypes is one of the considerations. At launch time, we were not clear on the fp64 performance of Kaveri's GPU but now we have official confirmation from AMD that it is 1/16th the rate of fp32 (similar to most GCN based GPUs except the flagships) and we have verified this on our 7850K by running FlopsCL. &nbsp;</p><p>I am taking this opportunity to summarize the info about Kaveri, Trinity, Llano and Intel's competing platforms Haswell and Ivy Bridge on both the CPU and GPU side. We provide a per-cycle estimate for the chips as well as peak calculated in gflops. The estimates are chip-wide, i.e. already take into account the number of cores or modules. Due to turbo boost, it was difficult to decide what frequency to use for peak calculations. For CPUs, we are using the base frequency and for GPUs we are using the boost frequency because in multithreaded and/or heterogeneous scenarios the CPU is less likely to turbo. In any case, we believe our readers are smart enough to calculate peaks at any frequency they want, given that we already supply per-cycle peaks :)</p><p>The peak CPU performance will depend on the SIMD ISA that your code was written and compiled for. We consider three cases: SSE, AVX (without FMA) and AVX with FMA (either FMA3 or FMA4).</p><p>&nbsp;</p><table border=1 cellpadding=1 cellspacing=1>CPU floating-point peak performance<tbody><tr><th>Platform</th><th>Kaveri</th><th>Trinity</th><th>Llano</th><th>Haswell</th><th>Ivy Bridge</th></tr><tr><th>Chip</th><td>7850K</td><td>5800K</td><td>3870K</td><td>4770K</td><td>3770K</td></tr><tr><th>CPU frequency</th><td>3.7 GHz</td><td>3.8 GHz</td><td>3.0GHz</td><td>3.5GHz</td><td>3.5GHz</td></tr><tr><th>SSE fp32 (/cycle)</th><td>16</td><td>16</td><td>32</td><td>32</td><td>32</td></tr><tr><th>SSE fp64 (/cycle)</th><td>8</td><td>8</td><td>16</td><td>16</td><td>16</td></tr><tr><th>AVX fp32 (/cycle)</th><td>16</td><td>16</td><td>-</td><td>64</td><td>64</td></tr><tr><th>AVX fp64 (/cycle)</th><td>8</td><td>8</td><td>-</td><td>32</td><td>32</td></tr><tr><th>AVX FMA fp32 (/cycle)</th><td>32</td><td>32</td><td>-</td><td>128</td><td>-</td></tr><tr><th>AVX FMA fp64 (/cycle)</th><td>16</td><td>16</td><td>-</td><td>64</td><td>-</td></tr><tr><th>SSE fp32 (gflops)</th><td>59.2</td><td>60.8</td><td>96</td><td>112</td><td>112</td></tr><tr><th>SSE fp64 (gflops)</th><td>29.6</td><td>30.4</td><td>48</td><td>56</td><td>56</td></tr><tr><th>AVX fp32 (gflops)</th><td>59.2</td><td>60.8</td><td>-</td><td>224</td><td>224</td></tr><tr><th>AVX fp64 (gflops)</th><td>29.6</td><td>30.4</td><td>-</td><td>112</td><td>112</td></tr><tr><th>AVX FMA fp32 (gflops)</th><td>118.4</td><td>121.6</td><td>-</td><td>448</td><td>-</td></tr><tr><th>AVX FMA fp64 (gflops)</th><td>59.2</td><td>60.8</td><td>-</td><td>224</td><td>-</td></tr></tbody></table><p>It is no secret that AMD's Bulldozer family cores (Steamroller in Kaveri and Piledriver in Trinity) are no match for recent Intel cores in FP performance due to the shared FP unit in each module. As a comparison point, one core in Haswell has the same floating point performance per cycle as two modules (or four cores) in Steamroller.</p><p>Now onto GPU peaks. Here, for Haswell, we chose to include both GT2 and GT3e variants.</p><table align=center border=1 cellpadding=1 cellspacing=1><tr><th scope=row>Platform</th><th scope=col>Kaveri</th><th scope=col>Trinity</th><th scope=col>Llano</th><th scope=col>Haswell GT3e</th><th scope=col>Haswell GT2</th><th scope=col>Ivy Bridge</th></tr>GPU floating-point peak performance<tbody><tr><th scope=row>Chip</th><td>7850K</td><td>5800K</td><td>3870K</td><td>4770R</td><td>4770K</td><td>3770K</td></tr><tr><th scope=row>GPU frequency</th><td>720 MHz</td><td>800 MHz</td><td>600 MHz</td><td>1.3 GHz</td><td>1.25 GHz</td><td>1.15 GHz</td></tr><tr><th scope=row>fp32/cycle</th><td>1024</td><td>768</td><td>800</td><td>640</td><td>320</td><td>256</td></tr><tr><th scope=row><p>fp64/cycle (OpenCL)</p></th><td>64</td><td>48**</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><th scope=row><p>fp64/cycle (Direct3D)</p></th><td>64</td><td>0?</td><td>0</td><td>160</td><td>80</td><td>64</td></tr><tr><th scope=row>fp32 gflops</th><td>737.3</td><td>614</td><td>480</td><td>832</td><td>400</td><td>294.4</td></tr><tr><th scope=row><p>fp64 gflops (OpenCL)</p></th><td>46.1</td><td>38.4**</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><th scope=row><p>fp64 gflops (Direct3D)</p></th><td>46.1</td><td>0?</td><td>0</td><td>208</td><td>100</td><td>73.6</td></tr></tbody></table><p>The fp64 support situation is a bit of a mess because some GPUs only support fp64 under some APIs.&nbsp; The fp64 rate of Intel's GPUs does not appear to be published but David Kanter <a href=#>provides</a> an estimate of 1/4 speed compared to fp32. However Intel only enables fp64 under DirectCompute but does not enable fp64 under OpenCL for any of its GPUs.</p><p>Situation on AMD's Trinity/Richland is even more complicated. fp64 support under OpenCL is not standards-compliant and depends upon using a proprietary extension (cl_amd_fp64). Trinity/Richland do not appear to support fp64 under DirectCompute (and MS C++ AMP implementation) from what I can tell. From an API standapoint, Kaveri's GCN GPUs should work fine on for fp64 under all APIs.</p><p>Some of you might be wondering whether Kaveri is good for HPC applications. Compared to discrete GPUs, applications that are already ported and work well on discrete GPUs will continue to be best run on discrete GPUs.&nbsp; However, <a href=#>Kaveri and HSA</a> will enable many more applications&nbsp; to be GPU accelerated.&nbsp;</p><p>Now we compare Kaveri against Haswell. In applications depending upon fp64 performance, conditions are not generally favorable to Kaveri. Kaveri's fp64 peak including both the CPU and GPU is only about 110 gflops.&nbsp; You will generally be better off first optimizing your code for AVX and FMA instructions and running on Haswell's CPU cores. If you are using Windows 8,&nbsp; you might also want to explore using Iris Pro through C++ AMP in conjunction with the CPU. Overall I doubt we will see Kaveri being used for fp64 workloads.</p><p>For heterogeneous fp32 applications, Kaveri should outperform Haswell GT2 and Ivy Bridge.&nbsp; Haswell GT3e will again be a strong contender on Windows given the extremely capable Haswell CPU cores and Iris Pro graphics.&nbsp; Intel's GPUs&nbsp; do not currently support OpenCL under Linux, but a driver is being worked on.&nbsp; Thus, on Linux, Kaveri will simply win out on fp32 heterogeneous applications. However, even on Windows Haswell GT3e will get strong competiton from Kaveri.&nbsp; While AMD has advantages such as excellent GCN architecture and HSA software stack (when ready) enabling many more applications to take advantage of GPU, Iris Pro will have the eDRAM to potentially provide much improved bandwidth and the backing of strong CPU cores.</p><p>I hope I have provided a fair overview of the FP capabilities of each platform. Application performance will of course depend on many more factors. Your questions and comments are welcome.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZIR4fZBonaWnkam2r7OMqaaipqRivaatymannqqWpL%2Burc2cnGanlmK4osLEq6BmmZ6ZerDAx56pZqqVmLKvwIyapJ1lkaOxbrXNrZylZZOdtrG%2F</p></section></article></main></div><footer><div class=container><span class=copyright>&copy; 2024 ByteZest - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a></span></div></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>